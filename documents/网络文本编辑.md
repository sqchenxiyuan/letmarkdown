# 网络文本编辑分析以及扩展

## Markdown 语法分析

Markdown官方文档将编辑语法分为：

> 区块元素
>    + 段落和换行
>    + 标题
>    + 区块引用
>    + 列表
>    + 代码区块
>    + 分隔线

> 区段元素
>    + 链接
>    + 强调
>    + 代码
>    + 图片

> 其它
>    + 反斜杠
>    + 自动链接

### 区块元素

区块元素是对整个区块进行转化，会通过固定的标记将内容提取出来，进行表示。
区块元素的优先级最高，会优先提升满足需求的内容。

比如：

```
p1
# p2
p3
```

在这里本来应转换为 `p1 # p2 p3`,
但是由于`# p2`这一行满足区块元素·标题的格式，进行提升将段落分开。(ps:建议在不同内容间使用空行分割，这样可以提高可读性)

### 区段元素

区段元素是对段落内的一些数据按照一些固定的格式进行转化，可以丰富编辑的内容。

除非在屏蔽Markdown语法的区域内，区段元素都是生效的

屏蔽Markdown语法的元素：

> 代码区块 内部

> 代码    内部


## 语法解析

我们可以从Markdown的语法中，主要提取出以下几类语法

### 本行提升语法

这类语法直接将本行的内容进行展示的改变。

#### 标题-类 Atx 形式

``` javascript

/^(\s*)#{1,6}\s+\S/

```

#### 分隔线

``` javascript

/^(( *)(\*|_|-)( *)){3,}$/

```

### 隔行语法

这类语法会受隔行内容的影响，或者影响隔行的内容展示

#### 标题-类 Setext 形式

``` javascript

/^(={3,}|(-{3,}))/  //

```

### 区段语法

一段按照固定的格式书写，进行固定的内容提取

####　区块引用

``` javascript

/^>/

```
> ```
> > 这是区段

> > 这是区段

> > 这是区段
> ```
> > 这是区段

> > 这是区段

> > 这是区段

#### 列表

``` javascript

/^(*|+|-)/

```

> ```
> + 这是列表

> - 这是列表

> * 这是列表

>     * 这是列表

>     * 这是列表
> ```
> + 这是列表

> - 这是列表

> * 这是列表

>     * 这是列表

>     * 这是列表

#### 代码区块

``` javascript

/^```\s+\S+\s*$/

/^```/

```

> > \``` javascript

> > var x=123//这是代码区块;

> > ```

> ``` javascript

> var x=123//这是代码区块;

> ```

### 段内语法

这一类语法只对段内符合接口的内容进行解析。

#### 链接

``` javascript

/^[.*](.*)$/

```
> > ```

> > [这是链接1](http://www.cxyblogbiu.com)

> > [这是链接2][link-1]

> > ```

> [这是链接1](http://www.cxyblogbiu.com)

> [这是链接2][link-1]

> ---

> [link-1]: http://www.cxyblogbiu.com (123)

#### 强调

``` javascript

/^\*(^\*)*\*|_(^_)*_$/ //倾斜

/^\*\*(^*)\*\*|_(^_)*_$/ //倾斜

```
> > ```

> > *123*

> > ```

>*123*

#### 代码

#### 强调

``` javascript

/^\*(^\*)*\*|_(^_)*_$/ //倾斜

```

> > ```

> > *123*

> > ```

>*123*

# 致敬Markdown

# 参考资料

1. [Markdown 语法说明 (简体中文版)](http://wowubuntu.com/markdown)
